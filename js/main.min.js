let timerInterval,startTime;function startTimer(){startTime=Date.now(),timerInterval=setInterval(updateTimer,100)}function updateTimer(){const e=Date.now()-startTime,t=Math.floor(e/1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=t%60,r=padZero(n)+":"+padZero(i)+":"+padZero(o),a=document.getElementById("timer");a&&(a.innerText=r)}function padZero(e){return(e<10?"0":"")+e}async function initMapWithDelay(){await ymaps3.ready,const{YMap:e,YMapDefaultSchemeLayer:t}=ymaps3;new e(document.getElementById("map"),{location:{center:[39.267048,51.71401],zoom:16}}).addChild(new t),document.getElementById("loader").style.display="none",document.getElementById("map").style.display="block"})function hideElement(){const e=document.getElementById("close-btn"),t=document.getElementById("item");e&&e.addEventListener("click",(function(){t.style.display="none"}))}function reloadMap(){const e=document.getElementById("map"),t=document.getElementById("reloadMapBtn");e&&t.addEventListener("click",(function(){e.firstChild&&e.removeChild(e.firstChild),e.style.display="none",document.getElementById("loader").style.display="block",initMapWithDelay()}))}function resetTimer(){const e=document.getElementById("btnn"),t=document.getElementById("timer");t&&e.addEventListener("click",(function(){clearInterval(timerInterval),t.innerText="00:00:00",startTimer()}))}function doActiveLink(){const e=document.querySelectorAll(".nav__item");document.querySelectorAll(".nav__link").forEach((function(t){t.addEventListener("click",(function(n){e.forEach((function(e){e.classList.remove("nav__item--active")})),t.parentNode.classList.add("nav__item--active")}))}))}function showHideRightMenu(){const e=document.getElementById("rightMenu__close--btn"),t=document.querySelector(".rightMenu"),n=document.querySelector(".burger__menu-btn");e.addEventListener("click",(function(e){t.classList.remove("rightMenu--close")})),n.addEventListener("click",(function(e){t.classList.add("rightMenu--close")}))}function swup(){const e=document.querySelector(".swup"),t=document.querySelectorAll(".nav__link"),n=t=>{fetch(t).then((e=>e.text())).then((n=>{const i=(new DOMParser).parseFromString(n,"text/html"),o=i.querySelector(".swup").innerHTML;e.innerHTML=o,document.title=i.title,history.pushState({},"",t)})).then((()=>{(e=>{e.includes("map")&&(initMapWithDelay(),hideElement(),reloadMap()),e.includes("timer")&&(resetTimer(),hideElement())})(t)}))};t.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.currentTarget.getAttribute("href");n(t)})),n(window.location.pathname),window.addEventListener("popstate",(()=>{n(window.location.pathname)}))}))}document.addEventListener("DOMContentLoaded",(()=>{startTimer(),doActiveLink(),showHideRightMenu(),swup()}));
