let timerInterval,startTime;function startTimer(){startTime=Date.now(),timerInterval=setInterval(updateTimer,100)}function updateTimer(){const e=Date.now()-startTime,t=Math.floor(e/1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=t%60,a=padZero(n)+":"+padZero(i)+":"+padZero(o),r=document.getElementById("timer");r&&(r.innerText=a)}function padZero(e){return(e<10?"0":"")+e}async function initMapWithDelay(){const e=document.getElementById("map");await ymaps3.ready,setTimeout((function(){e.innerHTML="";const{YMap:t,YMapDefaultSchemeLayer:n}=ymaps3,i=new t(e,{location:{center:[39.267048,51.71401],zoom:16}});let o=document.getElementById("loader");i.addChild(new n),o&&(o.style.display="none"),e&&(e.style.display="block")}),1e3)}function hideElement(){const e=document.getElementById("close-btn"),t=document.getElementById("item");e&&e.addEventListener("click",(function(){t.style.display="none"}))}function reloadMap(){const e=document.getElementById("map"),t=document.getElementById("reloadMapBtn");e&&t.addEventListener("click",(function(){e.firstChild&&e.removeChild(e.firstChild),e.style.display="none",document.getElementById("loader").style.display="block",initMapWithDelay()}))}function resetTimer(){const e=document.getElementById("btnn"),t=document.getElementById("timer");t&&e.addEventListener("click",(function(){clearInterval(timerInterval),t.innerText="00:00:00",startTimer()}))}function doActiveLink(){const e=document.querySelectorAll(".nav__item");document.querySelectorAll(".nav__link").forEach((function(t){t.addEventListener("click",(function(n){e.forEach((function(e){e.classList.remove("nav__item--active")})),t.parentNode.classList.add("nav__item--active")}))}))}function swup(){const e=document.querySelector(".swup"),t=document.querySelectorAll(".nav__link"),n=t=>{fetch(t).then((e=>e.text())).then((n=>{const i=(new DOMParser).parseFromString(n,"text/html").querySelector(".swup").innerHTML;var o;e.innerHTML=i,(o=t).includes("map")&&(initMapWithDelay(),hideElement(),reloadMap()),o.includes("timer")&&(resetTimer(),hideElement());const a=`${window.location.pathname}?content=${t}`;history.pushState(null,null,a)}))};t.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.currentTarget.getAttribute("href");n(t)}))})),window.addEventListener("popstate",(()=>{const e=new URLSearchParams(window.location.search).get("content");n(e||"index.html")}));const i=new URLSearchParams(window.location.search).get("content");i&&n(i)}document.addEventListener("DOMContentLoaded",(()=>{startTimer(),doActiveLink(),swup()}));