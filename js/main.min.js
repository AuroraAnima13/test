let timerInterval, startTime
function startTimer() {
  ;(startTime = Date.now()), (timerInterval = setInterval(updateTimer, 100))
}
function updateTimer() {
  const e = Date.now() - startTime,
    t = Math.floor(e / 1e3),
    n = Math.floor(t / 3600),
    o = Math.floor((t % 3600) / 60),
    d = t % 60,
    a = padZero(n) + ":" + padZero(o) + ":" + padZero(d),
    i = document.getElementById("timer")
  i && (i.innerText = a)
}
function padZero(e) {
  return (e < 10 ? "0" : "") + e
}
async function initMapWithDelay() {
  await ymaps3.ready,
    setTimeout(function () {
      const m = document.getElementById("map")
      if (!m) {
        return
      }
      const { YMap: e, YMapDefaultSchemeLayer: t } = ymaps3
      new e(m, {
        location: { center: [39.267048, 51.71401], zoom: 16 },
      }).addChild(new t()),
        (document.getElementById("loader").style.display = "none"),
        (document.getElementById("map").style.display = "block")
    }, 2000)
}
function hideElement() {
  const e = document.getElementById("close-btn"),
    t = document.getElementById("item")
  e &&
    e.addEventListener("click", function () {
      t.style.display = "none"
    })
}
function reloadMap() {
  const e = document.getElementById("map"),
    t = document.getElementById("reloadMapBtn")
  e &&
    t.addEventListener("click", function () {
      e.firstChild && e.removeChild(e.firstChild),
        (e.style.display = "none"),
        (document.getElementById("loader").style.display = "block"),
        initMapWithDelay()
    })
}
function resetTimer() {
  const e = document.getElementById("btnn"),
    t = document.getElementById("timer")
  t &&
    e.addEventListener("click", function () {
      clearInterval(timerInterval), (t.innerText = "00:00:00"), startTimer()
    })
}
document.addEventListener("DOMContentLoaded", startTimer),
  document.addEventListener("DOMContentLoaded", resetTimer),
  document.addEventListener("DOMContentLoaded", hideElement),
  document.addEventListener("DOMContentLoaded", reloadMap),
  document.addEventListener("DOMContentLoaded", function () {
    "/index.html" !== window.location.pathname && initMapWithDelay()
  }),
  document.addEventListener("DOMContentLoaded", function () {
    const e = document.querySelectorAll(".nav__item")
    document.querySelectorAll(".nav__link").forEach(function (t) {
      t.addEventListener("click", function (n) {
        e.forEach(function (e) {
          e.classList.remove("nav__item--active")
        }),
          t.parentNode.classList.add("nav__item--active")
      })
    })
  })
const swup = new Swup()
swup.hooks.on("content:replace", function (e) {
  initMapWithDelay(), reloadMap()
  hideElement(), resetTimer()
})
document.addEventListener("DOMContentLoaded", function (e) {
  const t = document.getElementById("rightMenu__close--btn"),
    n = document.querySelector(".rightMenu"),
    o = document.querySelector(".burger__menu-btn")
  t.addEventListener("click", function (e) {
    n.classList.remove("rightMenu--close")
  }),
    o.addEventListener("click", function (e) {
      n.classList.add("rightMenu--close")
    })
})
